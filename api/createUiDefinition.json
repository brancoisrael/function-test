{
    "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "0.1.2-preview",
    "parameters": {
        "resourceTypes": [
            "microsoft.resources/resourcegroups"
        ],
        "basics": [
            {
                "name": "sites_function_tests_name",
                "type": "Microsoft.Common.TextBox",
                "label": "Sites_function_tests_name",
                "subLabel": "",
                "defaultValue": "function-tests",
                "toolTip": "",
                "constraints": {
                    "required": false,
                    "regex": "",
                    "validationMessage": "",
                    "validations": []
                },
                "infoMessages": [],
                "visible": true
            },
            {
                "name": "components_function_tests_name",
                "type": "Microsoft.Common.TextBox",
                "label": "Components_function_tests_name",
                "subLabel": "",
                "defaultValue": "function-tests",
                "toolTip": "",
                "constraints": {
                    "required": false,
                    "regex": "",
                    "validationMessage": "",
                    "validations": []
                },
                "infoMessages": [],
                "visible": true
            },
            {
                "name": "serverfarms_ASP_rgfunction_925d_name",
                "type": "Microsoft.Common.TextBox",
                "label": "Serverfarms_ASP_rgfunction_925d_name",
                "subLabel": "",
                "defaultValue": "ASP-rgfunction-925d",
                "toolTip": "",
                "constraints": {
                    "required": false,
                    "regex": "",
                    "validationMessage": "",
                    "validations": []
                },
                "infoMessages": [],
                "visible": true
            },
            {
                "name": "storageAccounts_rgfunctiona0c9_name_checkNameAvailability",
                "type": "Microsoft.Solutions.ArmApiControl",
                "request": {
                    "method": "POST",
                    "path": "[concat(subscription().id, '/providers/Microsoft.Storage/checkNameAvailability?api-version=2016-01-01')]",
                    "body": {
                        "name": "[steps('basics').storageAccounts_rgfunctiona0c9_name]",
                        "type": "Microsoft.Storage/storageAccounts"
                    }
                }
            },
            {
                "name": "storageAccounts_rgfunctiona0c9_name_rePUT",
                "type": "Microsoft.Solutions.ArmApiControl",
                "request": {
                    "method": "GET",
                    "path": "[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Storage/storageAccounts/', steps('basics').storageAccounts_rgfunctiona0c9_name, '?api-version=2016-01-01')]",
                    "body": {}
                }
            },
            {
                "name": "storageAccounts_rgfunctiona0c9_name",
                "type": "Microsoft.Common.TextBox",
                "label": "Storage Accounts_rgfunctiona0c9_name",
                "defaultValue": "rgfunctiona0c9",
                "toolTip": "",
                "constraints": {
                    "required": false,
                    "validations": [
                        {
                            "isValid": "[or(steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.nameAvailable, equals(steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.reason, 'AlreadyExists'))]",
                            "message": "[steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.message]"
                        },
                        {
                            "isValid": "[or(steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.nameAvailable, equals(steps('basics').storageAccounts_rgfunctiona0c9_name_rePUT.id, concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Storage/storageAccounts/', steps('basics').storageAccounts_rgfunctiona0c9_name)), not(equals(steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.reason, 'AlreadyExists')) )]",
                            "message": "[steps('basics').storageAccounts_rgfunctiona0c9_name_checkNameAvailability.message]"
                        }
                    ]
                },
                "visible": true
            },
            {
                "name": "workspaces_defaultworkspace_a81e21b9_ec5e_4ad3_abd4_e15b38cf0722_eus_externalid",
                "type": "Microsoft.Common.TextBox",
                "label": "Workspaces_defaultworkspace_a81e21b9_ec5e_4ad3_abd4_e15b38cf0722_eus_externalid",
                "subLabel": "",
                "defaultValue": "/subscriptions/a81e21b9-ec5e-4ad3-abd4-e15b38cf0722/resourceGroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-a81e21b9-ec5e-4ad3-abd4-e15b38cf0722-eus",
                "toolTip": "",
                "constraints": {
                    "required": false,
                    "regex": "",
                    "validationMessage": "",
                    "validations": []
                },
                "infoMessages": [],
                "visible": true
            }
        ],
        "steps": [],
        "outputs": {
            "sites_function_tests_name": "[basics('sites_function_tests_name')]",
            "components_function_tests_name": "[basics('components_function_tests_name')]",
            "serverfarms_ASP_rgfunction_925d_name": "[basics('serverfarms_ASP_rgfunction_925d_name')]",
            "storageAccounts_rgfunctiona0c9_name": "[basics('storageAccounts_rgfunctiona0c9_name')]",
            "workspaces_defaultworkspace_a81e21b9_ec5e_4ad3_abd4_e15b38cf0722_eus_externalid": "[basics('workspaces_defaultworkspace_a81e21b9_ec5e_4ad3_abd4_e15b38cf0722_eus_externalid')]"
        }
    }
}